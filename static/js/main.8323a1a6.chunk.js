(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,n,t){},17:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(6),o=t.n(c),i=(t(15),t(16),t(5)),l=t(7),u=t(3),s=t(1),d=t(2),f=t(8);function m(e){var n=e.isIndeterminate,t=void 0!==n&&n,a=Object(f.a)(e,["isIndeterminate"]);return r.a.createElement("input",Object.assign({type:"checkbox",ref:function(e){e&&(e.indeterminate=t)}},a))}m.defaultProps={isIndeterminate:!1};var g=m;function v(e){var n=e.legislators,t=e.selectedIdMap,c=e.onChange,o=void 0===c?function(){}:c,i=Object(a.useMemo)(function(){return n.reduce(function(e,n){n.id;var t=n.position;return e[t]=e[t]||0,e[t]+=1,e},{})},[n]),l=Object(a.useMemo)(function(){return n.reduce(function(e,n){var a=n.id,r=n.position;return e[r]=e[r]||0,t[a]&&(e[r]+=1),e},{})},[n,t]),u=Object(a.useCallback)(function(e){var a=e.target.value;0===l[a]?o(n.filter(function(e){var n=e.position,r=e.id;return n===a||t[r]}).map(function(e){return e.id})):o(n.filter(function(e){var n=e.position,r=e.id;return n!==a&&t[r]}).map(function(e){return e.id}))},[l,n,o,t]);return r.a.createElement("ul",null,Object.keys(i).map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("label",null,r.a.createElement(g,{value:e,onChange:u,checked:l[e]===i[e],isIndeterminate:0<l[e]&&l[e]<i[e]})," ",e))}))}function h(e){var n=e.area,t=void 0===n?"":n,c=e.legislators,o=void 0===c?[]:c,i=e.selectedIdMap,l=void 0===i?{}:i,u=e.onChange,s=void 0===u?function(){}:u,d=o.filter(function(e){var n=e.id;return l[n]}).length,f=Object(a.useCallback)(function(e){if(0===d)s(o.map(function(e){return e.id}));else{var n=o.reduce(function(e,n){return e[n.id]=!0,e},{});s(Object.keys(l).filter(function(e){return!n[e]}))}},[o,s,d]),m=Object(a.useCallback)(function(e){var n=e.target.value;l[n]?s(Object.keys(l).filter(function(e){return e!==n})):s(Object.keys(l).concat(n))},[o,l,s]);return r.a.createElement("section",null,r.a.createElement("header",null,r.a.createElement("label",null,r.a.createElement(g,{onChange:f,isIndeterminate:0<d&&d<o.length,checked:d===o.length})," ",t)),r.a.createElement("ul",null,o.map(function(e){var n=e.id,t=e.name;return r.a.createElement("li",{key:n},r.a.createElement("label",null,r.a.createElement(g,{key:n,value:n,onChange:m,checked:!!l[n]})," ",t))})))}var p=function(e){var n=e.legislators,t=void 0===n?[]:n,c=e.selectedLegislatorIds,o=void 0===c?[]:c,i=(e.doneLegislatorsMap,e.onSelectionChange),l=void 0===i?function(){}:i,u=Object(a.useMemo)(function(){return t.reduce(function(e,n){return e[n.area]=e[n.area]||[],e[n.area].push(n),e},{})},[t]),s=Object(a.useMemo)(function(){return o.reduce(function(e,n){return e[n]=!0,e},{})},[o]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{legislators:t,selectedIdMap:s,onChange:l}),Object.keys(u).map(function(e){return r.a.createElement(h,{key:e,area:e,selectedIdMap:s,legislators:u[e],onChange:l})}))};function b(){var e=Object(s.a)(["\n  width: 100%;\n  border-radius: 4px;\n  padding: 8px;\n  border: 2px solid currentColor;\n  background: transparent;\n  color: #f29b61;\n"]);return b=function(){return e},e}function E(){var e=Object(s.a)(["\n  color: #845bf4;\n  font-style: normal;\n"]);return E=function(){return e},e}function j(){var e=Object(s.a)(["\n  text-align: center;\n  padding: 30px 0;\n\n  h1 {\n    font-size: 40px;\n    font-weight: normal;\n    letter-spacing: 0.125em;\n    margin: 0;\n  }\n\n  h2 {\n    margin: 16px 0 0;\n    font-size: 14px;\n    letter-spacing: 0.5em;\n    font-weight: 200;\n  }\n\n  &::before {\n    content: '\ud83c\udff3\ufe0f\u200d\ud83c\udf08';\n    font-size: 84px;\n    line-height: 1;\n  }\n"]);return j=function(){return e},e}function O(){var e=Object(s.a)(["\n  padding: 40px;\n"]);return O=function(){return e},e}var k=20,w=d.a.div(O()),C=d.a.header(j()),y=d.a.em(E()),x=d.a.textarea(b());var I=function(e){var n=e.msg,t=void 0===n?"":n,c=e.onMsgChange,o=void 0===c?function(){}:c,i=e.legislators,l=void 0===i?[]:i,u=e.selectedLegislatorIds,s=void 0===u?[]:u,d=e.doneLegislatorsMap,f=void 0===d?{}:d,m=e.onSelectionChange,g=void 0===m?function(){}:m,v=e.onSubmit,h=void 0===v?function(){}:v,b=Object(a.useRef)(null),E=Object.keys(f).length>0,j=s.filter(function(e){return!f[e]}).length,O=E?"\u9084\u6709 ".concat(j," \u4f4d\u59d4\u54e1\u8981\u50b3\uff0c"):"",I=k*j,M=I>120?" ".concat(Math.floor(I/60)," \u5206\u9418"):" ".concat(I," \u79d2");return r.a.createElement(w,null,r.a.createElement(C,null,r.a.createElement("h1",null,"\u6211",r.a.createElement(y,null,"\u611b\u5bb6"),"\u30fb\u6211\u806f\u7d61"),r.a.createElement("h2",null,"\u5e73\u6b0a\u7acb\u9662\u9375\u76e4\u9673\u60c5")),r.a.createElement("section",null,r.a.createElement("p",null,"\u8b93\u540c\u5fd7\u80fd\u4ee5",r.a.createElement(y,null,"\u5a5a\u59fb"),"\u6210\u5bb6\uff0c\u5c31\u662f\u300c",r.a.createElement(y,null,"\u611b\u5bb6"),"\u300d\u7684\u8868\u73fe\u3002 \u5728\u5e73\u6b0a\u6cd5\u6848\u901a\u904e\u4e4b\u524d\uff0c\u8b93\u6211\u5011\u52d5\u52d5\u624b\u6307\u982d\uff0c\u4e0d\u5206\u7570\u540c\u5730\u5411\u7acb\u6cd5\u59d4\u54e1\u5011\u8868\u9054\u6211\u5011",r.a.createElement(y,null,"\u5e0c\u671b\u8b93\u540c\u5fd7\u53ef\u4ee5\u7d50\u5a5a"),"\u7684\u5fc3\u8072\u5427\uff01"),r.a.createElement("p",null,"\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc66\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"),r.a.createElement("label",null,r.a.createElement("h3",null,"\u4f60\u60f3\u8981\u8ddf\u59d4\u54e1\u5011\u8aaa\u4ec0\u9ebc\u5462\uff1f"),r.a.createElement(x,{value:t,onChange:function(e){return o(e.target.value)}})),r.a.createElement("button",{type:"button",onClick:function(){return b.current.scrollIntoView({behavior:"smooth",block:"start"})}},"\u4e0b\u4e00\u6b65")),r.a.createElement("section",{ref:b},r.a.createElement("h3",null,"\u8acb\u9078\u64c7\u8981\u9673\u60c5\u7684\u7acb\u59d4"),r.a.createElement("button",{type:"button",onClick:function(){return g(l.map(function(e){return e.id}))}},"\u5168\u9078\u5566\uff01"),r.a.createElement("p",null,"\u60a8\u9078\u4e86 ",s.length," \u540d\u59d4\u54e1",O,"\uff0c\u5927\u6982\u82b1",M,"\u5c31\u80fd\u50b3\u5b8c\u3002"),r.a.createElement(p,{legislators:l||[],selectedLegislatorIds:s,doneLegislatorsMap:f,onSelectionChange:g}),r.a.createElement("button",{type:"button",onClick:h,disabled:0===j},E?"\u7e7c\u7e8c":"\u958b\u59cb","\u9673\u60c5")))},M=(window.FB?Promise.resolve(window.FB):new Promise(function(e){window.fbAsyncInit=function(){e(window.FB)}})).then(function(e){return e.init({appId:"411731149364306",version:"v3.2"}),e});var L=r.a.memo(function(e){var n=e.tabs,t=void 0===n?["messages","timeline"]:n,c=e.href,o=void 0===c?"":c,i=Object(a.useRef)(null);return Object(a.useEffect)(function(){M.then(function(e){e.XFBML.parse(i.current)})}),r.a.createElement("div",{ref:i},r.a.createElement("div",{className:"fb-page","data-href":o,"data-tabs":t.join(","),"data-small-header":"true","data-adapt-container-width":"false","data-show-facepile":"false","data-hide-cta":"true","data-width":"320","data-height":"500"}))}),S={$$BREAK:!0};function B(e,n){for(var t=[],a=0;a<e.length;a+=1){var r=F(e[a],n);if(r===S)break;t.push(r)}return t}function F(e,n){switch(!0){case"string"===typeof e:return n(e);case e instanceof Array:return B(e,n);case r.a.isValidElement(e):var t=r.a.Children.toArray(e.props.children),a=B(t,n);return t.length===a.length&&t.every(function(e,n){return e===a[n]})?e:r.a.cloneElement(e,{},a);default:return null}}var z=RegExp(" *".concat("(\r\n|\r|\n)"," *"),"g");function A(){var e=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n"]);return A=function(){return e},e}function R(){var e=Object(s.a)(["\n  font-size: 32px;\n"]);return R=function(){return e},e}function N(){var e=Object(s.a)(["\n  display: flex;\n  padding: 40px;\n\n  section {\n    flex: 1;\n    padding-left: 24px;\n    &:first-of-type {\n      padding-left: 0;\n    }\n  }\n"]);return N=function(){return e},e}var P=d.a.div(N()),W=d.a.button(R()),$=d.a.textarea(A());var J=function(e){var n=e.msg,t=void 0===n?"":n,a=e.currentIdx,c=void 0===a?0:a,o=e.selectedLegislators,i=void 0===o?[]:o,l=e.onMsgChange,u=void 0===l?function(){}:l,s=e.onNext,d=void 0===s?function(){}:s;if(e.onBack,-1===c)return r.a.createElement("div",null,"\u90fd\u505a\u5b8c\u56c9\uff01\u8b1d\u8b1d\u60a8 m(_ _)m");var f=i[c],m=f.name,g=f.pridewatchpage,v=f.position,h=f.desc,p=f.facebookpage;return r.a.createElement(P,null,r.a.createElement("section",null,r.a.createElement($,{placeholder:"\u628a\u9673\u60c5\u6587\u5b57\u8cbc\u5728\u9019\u88e1\uff0c\u65b9\u4fbf\u8907\u88fd\u8cbc\u4e0a",onChange:function(e){return u(e.target.value)},value:t,onClick:function(e){return e.target.select()}})),r.a.createElement("section",null,r.a.createElement(L,{href:p})),r.a.createElement("section",null,r.a.createElement("h1",null,r.a.createElement("a",{href:g},m)),r.a.createElement("h2",null,v),r.a.createElement("p",null,F(h,function(e){if(!e)return e;var n,t=e.split(z).filter(function(e){return""!==e}).map(function(e,n){return e.match(z)?r.a.createElement("br",{key:"br".concat(n)}):e});return(n=t).every(function(e){return"string"===typeof e})?n.join():n})),r.a.createElement(W,{onClick:d},"\u4e0b\u4e00\u4f4d \u300b")))},V=null;var _=function(){var e=Object(a.useState)(V),n=Object(u.a)(e,2),r=n[0],c=n[1];return Object(a.useEffect)(function(){r||t.e(3).then(t.t.bind(null,18,3)).then(function(e){return c(V=e.default.rows)})}),[r,Object(a.useMemo)(function(){return(r||[]).reduce(function(e,n){return e[n.id]=n,e},{})},[r])]},K="\u6211\u662f\uff38\uff38\u5340\u7684\u9078\u6c11\uff0c\u8acb\u59d4\u54e1\u652f\u6301\u7528\u5408\u61b2\u7684\u6cd5\u5f8b\uff0c\u8b93\u540c\u5fd7\u53ef\u4ee5\u7d50\u5a5a\u3002",X={"\u652f\u6301\u540c\u5a5a":1,"\u652f\u6301\u5c08\u6cd5":2,"\u53cd\u5c0d\u540c\u5a5a":3,"\u672a\u8868\u614b":4};var q=function(){var e=_(),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)("settings"),s=Object(u.a)(o,2),d=s[0],f=s[1],m=Object(a.useState)(K),g=Object(u.a)(m,2),v=g[0],h=g[1],p=Object(a.useState)([]),b=Object(u.a)(p,2),E=b[0],j=b[1],O=Object(a.useState)({}),k=Object(u.a)(O,2),w=k[0],C=k[1],y=Object(a.useCallback)(function(e){j(e.sort(function(e,n){return w[e]&&!w[n]?-1:!w[e]&&w[n]?1:X[c[e].position]-X[c[n].position]}))},[j,w,c]),x=Object(a.useCallback)(function(){return f("send")},[f]);switch(d){case"settings":return r.a.createElement(I,{msg:v,onMsgChange:h,legislators:t,selectedLegislatorIds:E,onSelectionChange:y,doneLegislatorMap:w,onSubmit:x});case"send":var M=E.map(function(e){return c[e]}),L=E.findIndex(function(e){return!w[e]});return r.a.createElement(J,{msg:v,currentIdx:L,selectedLegislators:M,onMsgChange:h,onNext:function(){return C(Object(l.a)({},w,Object(i.a)({},M[L].id,!0)))},onBack:function(){return f("settings")}});default:throw new Error("Wrong page settings")}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,n,t){e.exports=t(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.8323a1a6.chunk.js.map