{"version":3,"sources":["components/MessageInput.js","components/Checkbox.js","components/LegislatorSections.js","components/SpinningIcon.js","components/Divider.js","lib/useIntersectionObserver.js","components/StartButton.js","components/MessageTemplates.js","components/SendTypeSwitch.js","SettingsPage.js","lib/useLegislatorContactData.js","lib/waitForFB.js","components/FacebookPagePlugin.js","components/LegislatorDisplay.js","components/ContactDisplay.js","components/buttons.js","components/FinishDisplay.js","components/CopyButton.js","SendPage.js","lib/useLegislatorData.js","App.js","serviceWorker.js","index.js"],"names":["TextArea","styled","textarea","_templateObject","MessageInput","props","value","handleBlur","useCallback","window","ga","react_default","a","createElement","Object","assign","onBlur","Checkbox","_ref","_ref$isIndeterminate","isIndeterminate","objectWithoutProperties","type","ref","checkbox","indeterminate","defaultProps","Container","div","LegislatorSections_templateObject","CheckboxList","ul","_templateObject2","PositionCheckboxList","_templateObject3","Section","section","_templateObject4","PositionSelector","_ref2","legislators","selectedIdMap","_ref2$onChange","onChange","positionTotalMap","useMemo","reduce","agg","_ref3","id","position","positionCountMap","_ref4","selectedCount","keys","length","handlePositionToggle","e","toggledPosition","target","filter","_ref5","map","_ref6","_ref7","_ref8","handleAllToggle","_ref9","targetedSelectedCount","_ref10","targeted","targetedSelectedTotal","_ref11","handleTargetedToggle","_ref12","_ref13","_ref14","_ref15","style","fontWeight","color","components_Checkbox","checked","p","key","href","rel","LegislatorSection","_ref16","_ref16$area","area","_ref16$legislators","_ref16$selectedIdMap","_ref16$onChange","_ref17","handleSectionToggle","newMap","objectSpread","forEach","_ref18","legislatorMap","_ref19","handleSingleToggle","selectedId","concat","_ref20","name","React","memo","_ref$legislators","_ref$selectedLegislat","selectedLegislatorIds","_ref$onSelectionChang","doneLegislatorMap","onSelectionChange","legislatorsByArea","areas","legislator","push","DURATION","flip","keyframes","SpinningIcon_templateObject","_ref$icons","icons","_useState","useState","_useState2","slicedToArray","idx","setIdx","iconCount","useEffect","handle","setTimeout","clearTimeout","role","aria-label","SpinningIcon_templateObject2","_ref$content","content","Divider_templateObject","useIntersectionObserver","elem","arguments","undefined","onView","io","useRef","useLayoutEffect","current","disconnect","IntersectionObserver","observe","SECONDS_EACH_LEGISLATOR_FB","SECONDS_EACH_LEGISLATOR_TEL","BreakOnSmallScreen","br","StartButton_templateObject","onClick","_ref$show","show","className","_ref$sendType","sendType","hasStarted","legislatorToSendCount","totalSeconds","timeStr","Math","floor","ga-on","ga-event-category","ga-event-action","ga-event-label","ga-event-value","StartButton_templateObject2","messageTemplateData","TemplateOption","_ref$template","template","label","msg","_ref$onSelect","onSelect","handleClick","_ref2$onSelect","templates","setTemplates","__webpack_require__","then","t","bind","data","default","rows","data-label","MessageTemplates_templateObject","_ref$value","_ref$onChange","SendTypeSwitch_templateObject","PageContainer","SettingsPage_templateObject","Jumbotron","header","SettingsPage_templateObject2","Emphasis","em","SettingsPage_templateObject3","Header","components_SpinningIcon","Footer","footer","SettingsPage_templateObject4","SettingsPage","_ref$msg","_ref$onMsgChange","onMsgChange","_ref$doneLegislatorMa","_ref$onSendTypeChange","onSendTypeChange","_ref$onSubmit","onSubmit","selectionSectionRef","isSelectionInView","setSelectionInView","handleNextClick","scrollIntoView","behavior","block","handleSelectionIntersect","entries","isIntersecting","handleMessageAdd","selectedMsg","components_Divider","components_SendTypeSwitch","components_MessageTemplates","components_MessageInput","autoFocus","display","justifyContent","margin","fontSize","opacity","flexShrink","marginLeft","components_LegislatorSections","components_StartButton","storedContactMapGetter","getNameHash","slice","replace","useLegislatorContactData","getContactByName","setContactMapGetter","contacts","fbPromise","FB","Promise","resolve","fbAsyncInit","init","appId","process","version","DEFAULT_TABS","Cover","FacebookPagePlugin_templateObject","_ref$className","_ref$tabs","tabs","_ref$href","_ref$width","width","_ref$height","height","_ref$onParsed","onParsed","_ref$profile","profile","fbRoot","waitForFB","XFBML","parse","data-href","data-tabs","join","data-small-header","data-adapt-container-width","data-show-facepile","data-hide-cta","data-width","data-height","LegislatorData","article","LegislatorDisplay_templateObject","LegislatorDisplay_templateObject2","LegislatorDisplay","_ref$legislator","pridewatchpage","description","party","religion","subarea","facebookpage","overflowX","padding","split","desc","LegislatorDisplay_Footer","marginBottom","_ref$contacts","phone","address","ContactDisplay_templateObject","Button","button","buttons_templateObject","BorderedButton","buttons_templateObject2","FinishDisplay_templateObject","FinishDisplay","onBack","FinishDisplay_Container","CopyButton","onCopy","text","copyBtnRef","clipboardInstance","destroy","ClipboardJS","on","cogoToast","success","SendPage_templateObject","HeaderProgress","SendPage_templateObject2","Back","SendPage_templateObject3","SendPage_templateObject4","NextButton","shouldForwardProp","_templateObject5","PluginWrapper","_templateObject6","Hint","_templateObject7","SendPage","_ref$currentIdx","currentIdx","selectedLegislators","_ref$onNext","onPrev","onNext","_ref$onBack","submitStepRef","pluginHeight","setPluginHeight","handleNext","handleCopy","components_FinishDisplay","_selectedLegislators$","facebookprofile","feedonly","cannotload","Fragment","SendPage_Header","toFixed","SendPage_Container","components_LegislatorDisplay","flex","placeholder","components_CopyButton","flexBasis","index_esm","components_FacebookPagePlugin","components_ContactDisplay","legislatorData","useLegislatorData","setLegislators","POSITION_ORDER","支持同婚","支持專法","反對同婚","未表態","DEFAULT_SEND_TYPE","DEFAULT_FB_MESSAGE","DEFAULT_TEL_MESSAGE","App","_useLegislatorData","_useLegislatorData2","page","setPage","_useState3","_useState4","setMsg","_useState5","_useState6","setLegislatorIds","_useState7","_useState8","setLegislatorDone","_useState9","_useState10","setSendType","findIndex","handleSelectionChange","sort","aId","bId","aPos","bPos","handleSendTypeChange","newSendType","trim","handleSettingsSubmit","handleBackToSettings","defineProperty","src_SettingsPage","src_SendPage","Error","Boolean","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b3f48dc9.chunk.js","sourcesContent":["import React, { useCallback } from 'react';\nimport styled from '@emotion/styled';\n\nconst TextArea = styled.textarea`\n  width: 100%;\n  border-radius: 8px;\n  padding: 8px;\n  border: 2px solid currentColor;\n  background-color: rgba(255, 255, 255, 0.12);\n  color: #ff9753;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.22);\n  }\n\n  &:focus {\n    background-color: rgba(0, 0, 0, 0.2);\n    outline: 0;\n  }\n`;\n\nfunction MessageInput(props) {\n  const { value } = props;\n\n  const handleBlur = useCallback(() => {\n    window.ga('set', 'dimension1', value); // message\n  }, [value]);\n\n  return <TextArea {...props} onBlur={handleBlur} />;\n}\n\nexport default MessageInput;\n","import React from 'react';\n\n// https://github.com/facebook/react/issues/1798#issuecomment-417047897\nfunction Checkbox({ isIndeterminate = false, ...props }) {\n  const setCheckboxRef = checkbox => {\n    if (checkbox) {\n      checkbox.indeterminate = isIndeterminate;\n    }\n  };\n\n  return <input type=\"checkbox\" ref={setCheckboxRef} {...props} />;\n}\n\nCheckbox.defaultProps = {\n  isIndeterminate: false,\n};\n\nexport default Checkbox;\n","import React, { useMemo, useCallback } from 'react';\nimport styled from '@emotion/styled';\nimport Checkbox from './Checkbox';\n\nconst Container = styled.div`\n  li {\n    display: inline-block;\n    padding-right: 2em;\n  }\n\n  label {\n    min-width: 105px;\n  }\n\n  input {\n    margin-right: 0.5em;\n  }\n`;\n\nconst CheckboxList = styled.ul`\n  list-style: none;\n  padding: 0;\n`;\n\nconst PositionCheckboxList = styled(CheckboxList)`\n  background: rgba(0, 0, 0, 0.2);\n  padding: 16px 24px;\n  border-radius: 8px;\n`;\n\nconst Section = styled.section`\n  margin: 40px 0;\n  header {\n    font-size: 20px;\n    border-bottom: 2px dotted rgba(255, 255, 255, 0.12);\n    label {\n      padding: 8px 0;\n    }\n  }\n`;\n\n/**\n * Section of all legislators and controls\n *\n * @param {Object[]} props.legislator\n * @param {String[]} props.selectedLegislatorIds\n * @param {Object} props.doneLegislatorMap - id to true map\n * @param {function} props.onSelectionChange\n */\nfunction LegislatorSections({\n  legislators = [],\n  selectedLegislatorIds = [],\n  doneLegislatorMap = {},\n  onSelectionChange = () => {},\n}) {\n  const legislatorsByArea = useMemo(\n    () =>\n      legislators.reduce((areas, legislator) => {\n        areas[legislator.area] = areas[legislator.area] || [];\n        areas[legislator.area].push(legislator);\n        return areas;\n      }, {}),\n    [legislators]\n  );\n\n  const selectedIdMap = useMemo(\n    () =>\n      selectedLegislatorIds.reduce((agg, id) => {\n        agg[id] = true;\n        return agg;\n      }, {}),\n    [selectedLegislatorIds]\n  );\n\n  return (\n    <Container>\n      <PositionSelector\n        legislators={legislators}\n        selectedIdMap={selectedIdMap}\n        onChange={onSelectionChange}\n      />\n      {Object.keys(legislatorsByArea).map(area => (\n        <LegislatorSection\n          key={area}\n          area={area}\n          selectedIdMap={selectedIdMap}\n          legislators={legislatorsByArea[area]}\n          onChange={onSelectionChange}\n        />\n      ))}\n    </Container>\n  );\n}\n\nfunction PositionSelector({ legislators, selectedIdMap, onChange = () => {} }) {\n  // position to total map\n  const positionTotalMap = useMemo(\n    () =>\n      legislators.reduce((agg, { id, position }) => {\n        agg[position] = agg[position] || 0;\n        agg[position] += 1;\n\n        return agg;\n      }, {}),\n    [legislators]\n  );\n\n  // position to count map\n  const positionCountMap = useMemo(\n    () =>\n      legislators.reduce((agg, { id, position }) => {\n        agg[position] = agg[position] || 0;\n        if (selectedIdMap[id]) {\n          agg[position] += 1;\n        }\n        return agg;\n      }, {}),\n    [legislators, selectedIdMap]\n  );\n\n  const selectedCount = Object.keys(selectedIdMap).length;\n\n  const handlePositionToggle = useCallback(\n    e => {\n      const toggledPosition = e.target.value;\n\n      if (positionCountMap[toggledPosition] === 0) {\n        // select all in platform\n        onChange(\n          legislators\n            .filter(\n              ({ position, id }) =>\n                position === toggledPosition || selectedIdMap[id]\n            )\n            .map(({ id }) => id)\n        );\n      } else {\n        // deselect all\n        onChange(\n          legislators\n            .filter(\n              ({ position, id }) =>\n                position !== toggledPosition && selectedIdMap[id]\n            )\n            .map(({ id }) => id)\n        );\n      }\n    },\n    [positionCountMap, legislators, onChange, selectedIdMap]\n  );\n\n  const handleAllToggle = useCallback(() => {\n    if (selectedCount === 0) {\n      onChange(legislators.map(({ id }) => id));\n    } else {\n      onChange([]);\n    }\n  }, [selectedCount, legislators]);\n\n  const targetedSelectedCount = useMemo(\n    () =>\n      legislators.filter(({ id, targeted }) => targeted && selectedIdMap[id])\n        .length,\n    [legislators, selectedIdMap]\n  );\n  const targetedSelectedTotal = useMemo(\n    () => legislators.filter(({ targeted }) => targeted).length,\n    [legislators]\n  );\n\n  const handleTargetedToggle = useCallback(\n    e => {\n      if (targetedSelectedCount === 0) {\n        // select all in platform\n        onChange(\n          legislators\n            .filter(({ targeted, id }) => targeted || selectedIdMap[id])\n            .map(({ id }) => id)\n        );\n      } else {\n        // deselect all\n        onChange(\n          legislators\n            .filter(({ targeted, id }) => !targeted && selectedIdMap[id])\n            .map(({ id }) => id)\n        );\n      }\n    },\n    [legislators, onChange, selectedIdMap]\n  );\n\n  return (\n    <PositionCheckboxList>\n      <li>\n        <label style={{ fontWeight: 'bold', color: '#FF5368' }}>\n          <Checkbox\n            onChange={handleAllToggle}\n            checked={selectedCount === legislators.length}\n            isIndeterminate={\n              0 < selectedCount && selectedCount < legislators.length\n            }\n          />\n          全選\n        </label>\n      </li>\n      {Object.keys(positionTotalMap).map(p => (\n        <li key={p}>\n          <label>\n            <Checkbox\n              value={p}\n              onChange={handlePositionToggle}\n              checked={positionCountMap[p] === positionTotalMap[p]}\n              isIndeterminate={\n                0 < positionCountMap[p] &&\n                positionCountMap[p] < positionTotalMap[p]\n              }\n            />{' '}\n            {p}\n          </label>\n        </li>\n      ))}\n      <li>\n        <label style={{ fontWeight: 'bold', color: '#FF5368' }}>\n          <Checkbox\n            onChange={handleTargetedToggle}\n            checked={targetedSelectedCount === targetedSelectedTotal}\n            isIndeterminate={\n              0 < targetedSelectedCount &&\n              targetedSelectedCount < targetedSelectedTotal\n            }\n          />\n          遭到反同鎖定的\n        </label>\n        <a\n          href=\"https://www.mirrormedia.mg/story/20190302inv001\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          立委們\n        </a>\n      </li>\n    </PositionCheckboxList>\n  );\n}\n\n/**\n * Legislator control of one section area\n *\n * @param {string} props.area - Legislator section area\n * @param {object[]} props.legislators - legislators of this section\n * @param {object} props.selectedIdMap\n * @param {function} props.onChange\n */\nfunction LegislatorSection({\n  area = '',\n  legislators = [],\n  selectedIdMap = {},\n  onChange = () => {},\n}) {\n  const selectedCount = legislators.filter(({ id }) => selectedIdMap[id])\n    .length;\n\n  const handleSectionToggle = useCallback(\n    e => {\n      if (selectedCount === 0) {\n        // Select all in section\n        const newMap = { ...selectedIdMap };\n        legislators.forEach(({ id }) => {\n          newMap[id] = true;\n        });\n\n        onChange(Object.keys(newMap));\n      } else {\n        const legislatorMap = legislators.reduce((agg, { id }) => {\n          agg[id] = true;\n          return agg;\n        }, {});\n        // deselect all in legislators\n        onChange(Object.keys(selectedIdMap).filter(id => !legislatorMap[id]));\n      }\n    },\n    [legislators, onChange, selectedCount, selectedIdMap]\n  );\n\n  const handleSingleToggle = useCallback(\n    e => {\n      const selectedId = e.target.value;\n\n      if (selectedIdMap[selectedId]) {\n        // Deselect this\n        onChange(Object.keys(selectedIdMap).filter(id => id !== selectedId));\n      } else {\n        // Select this\n        onChange(Object.keys(selectedIdMap).concat(selectedId));\n      }\n    },\n    [legislators, selectedIdMap, onChange]\n  );\n\n  return (\n    <Section>\n      <header>\n        <label>\n          <Checkbox\n            onChange={handleSectionToggle}\n            isIndeterminate={\n              0 < selectedCount && selectedCount < legislators.length\n            }\n            checked={selectedCount === legislators.length}\n          />{' '}\n          {area}\n        </label>\n      </header>\n      <CheckboxList>\n        {legislators.map(({ id, name }) => (\n          <li key={id}>\n            <label>\n              <Checkbox\n                key={id}\n                value={id}\n                onChange={handleSingleToggle}\n                checked={!!selectedIdMap[id]}\n              />{' '}\n              {name}\n            </label>\n          </li>\n        ))}\n      </CheckboxList>\n    </Section>\n  );\n}\n\nexport default React.memo(LegislatorSections);\n","import React, { useEffect, useState } from 'react';\nimport styled from '@emotion/styled';\nimport { keyframes } from '@emotion/core';\n\nconst DURATION = 1; // seconds\n\nfunction SpinningIcon({ icons = [], ...props }) {\n  const [idx, setIdx] = useState(0);\n  const iconCount = icons.length;\n\n  useEffect(() => {\n    const handle = setTimeout(() => {\n      setIdx((idx + 1) % iconCount);\n    }, DURATION * 1000);\n\n    return () => clearTimeout(handle);\n  }, [idx, iconCount]);\n\n  return (\n    <span\n      key={idx}\n      /* Change key to force trigger the 1-time animation */\n      role=\"img\"\n      aria-label=\"Icon\"\n      {...props}\n    >\n      {icons[idx]}\n    </span>\n  );\n}\n\nconst flip = keyframes`\n  from {\n    transform: perspective(400px) rotateY(90deg);\n  }\n\n  to {\n    transform: perspective(400px) rotateY(-90deg);\n  }\n`;\n\nexport default styled(SpinningIcon)`\n  /*\n    Can't use emojis that is too large on mobile:\n    https://stackoverflow.com/questions/29142118/why-do-emoji-not-render-above-a-certain-size-in-chrome\n  */\n  font-size: 60px;\n  line-height: 1;\n  display: inline-block;\n  transform: perspective(400px) rotateY(90deg);\n  animation: ${flip} 1s cubic-bezier(0, 0.37, 1, 0.63); /* no infinite here, use DOM change to trigger animation */\n\n  @media screen and (min-width: 1024px) {\n    font-size: 84px;\n  }\n`;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nfunction Divider({ content = '👨‍👨‍👧‍👦👨‍👩‍👧‍👦👩‍👩‍👧‍👦', ...props }) {\n  return (\n    <p {...props}>\n      <span role=\"img\" aria-label=\"Horizontal ruler\">\n        {content}\n      </span>\n    </p>\n  );\n}\n\nexport default styled(Divider)`\n  margin: 40px 0;\n  text-align: center;\n  letter-spacing: 0.5em;\n`;\n","import 'intersection-observer'; // polyfill\nimport { useRef, useLayoutEffect } from 'react';\n\nfunction useIntersectionObserver(elem = null, onView = () => {}) {\n  const io = useRef(null);\n\n  useLayoutEffect(() => {\n    if (io.current) {\n      io.current.disconnect();\n    }\n    if (elem) {\n      io.current = new IntersectionObserver(onView, {});\n      io.current.observe(elem);\n    }\n    return () => {\n      if (io.current) {\n        io.current.disconnect();\n      }\n    };\n  }, [elem, onView]);\n}\n\nexport default useIntersectionObserver;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nconst SECONDS_EACH_LEGISLATOR_FB = 20;\nconst SECONDS_EACH_LEGISLATOR_TEL = 300;\n\nconst BreakOnSmallScreen = styled.br`\n  @media screen and (min-width: 425px) {\n    display: none;\n  }\n`;\n\n/**\n * Start sending button on settings page\n *\n * @param {String[]} props.selectedLegislatorIds\n * @param {Object} props.doneLegislatorMap - id to true map\n * @param {function} props.onClick\n * @param {boolean} props.show - whether to show this button\n */\nfunction StartButton({\n  doneLegislatorMap,\n  selectedLegislatorIds,\n  onClick,\n  show = false,\n  className,\n  sendType = '',\n}) {\n  const hasStarted = Object.keys(doneLegislatorMap).length > 0;\n  const legislatorToSendCount = selectedLegislatorIds.filter(\n    id => !doneLegislatorMap[id]\n  ).length;\n  const secondsEachLegislator =\n    sendType === 'fb'\n      ? SECONDS_EACH_LEGISLATOR_FB\n      : SECONDS_EACH_LEGISLATOR_TEL;\n\n  const totalSeconds = secondsEachLegislator * legislatorToSendCount;\n  const timeStr =\n    totalSeconds > 120\n      ? ` ${Math.floor(totalSeconds / 60)} 分鐘`\n      : ` ${totalSeconds} 秒`;\n\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      className={`${className} ${\n        show && legislatorToSendCount > 0 ? 'show' : ''\n      }`}\n      ga-on=\"click\"\n      ga-event-category=\"send\"\n      ga-event-action=\"start\"\n      ga-event-label={hasStarted ? '繼續' : '開始'}\n      ga-event-value={legislatorToSendCount}\n    >\n      <span>\n        {hasStarted ? '繼續' : '開始'}向 {legislatorToSendCount} 位委員陳情{' '}\n        <BreakOnSmallScreen />\n        <small> (約需 {timeStr}) </small>\n      </span>\n    </button>\n  );\n}\n\nexport default styled(StartButton)`\n  position: fixed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  padding: 24px;\n\n  transform: translate(0, 100%);\n  transition: transform 0.2s ease-out, background-color 0.2s;\n\n  font-size: 20px;\n  font-weight: bold;\n  border-radius: 0;\n\n  & > span {\n    margin: 0 auto;\n  }\n\n  &::after {\n    content: '';\n    width: 16px;\n    height: 16px;\n    border-top: 2px solid #fff;\n    border-right: 2px solid #fff;\n    border-radius: 2px;\n    transform: rotate(45deg);\n    transition: transform 0.15s ease-out;\n  }\n\n  &:hover::after {\n    transform: translate(8px, 0) rotate(45deg);\n  }\n\n  &.show {\n    transform: translate(0, 0);\n  }\n`;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport styled from '@emotion/styled';\n\n// shared storage of legislators\nlet messageTemplateData = null;\n\nfunction TemplateOption({ template: { label, msg }, onSelect = () => {} }) {\n  const handleClick = useCallback(() => {\n    onSelect(msg);\n  }, [msg, onSelect]);\n\n  return <li onClick={handleClick}>{label}</li>;\n}\n\nfunction MessageTemplates({ onSelect = () => {}, ...props }) {\n  const [templates, setTemplates] = useState(messageTemplateData);\n\n  useEffect(() => {\n    if (templates) return;\n\n    import('data/messageTemplates.json').then(data =>\n      setTemplates((messageTemplateData = data.default.rows))\n    );\n  }, [templates]);\n\n  if (!templates) return null;\n\n  return (\n    <ul data-label=\"加點內容：\" {...props}>\n      {templates.map((template, idx) => (\n        <TemplateOption key={idx} template={template} onSelect={onSelect} />\n      ))}\n    </ul>\n  );\n}\n\nexport default styled(MessageTemplates)`\n  list-style: none;\n  margin: 0 0 8px;\n  padding: 0;\n\n  &::before {\n    content: attr(data-label);\n  }\n\n  li {\n    display: inline-block;\n    padding: 4px 6px;\n    margin: 0 0 4px 4px;\n    font-size: 12px;\n    border-radius: 30px;\n    border: 1px solid currentColor;\n    color: #ff5368;\n    transition-property: color, background-color;\n    transition-duration: 0.2s;\n\n    &:hover {\n      background-color: #ff5368;\n      color: #fff;\n    }\n  }\n`;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nfunction SendTypeSwitch({ value = '', onChange = () => {}, ...props }) {\n  return (\n    <ul {...props}>\n      <li\n        className={value === 'fb' ? 'selected' : ''}\n        onClick={() => onChange('fb')}\n      >\n        <h4>\n          FB 粉專{' '}\n          <span role=\"img\" aria-label=\"\">\n            💬\n          </span>\n        </h4>\n        <p>\n          <span role=\"img\" aria-label=\"優點\">\n            👍\n          </span>{' '}\n          方便快速、通勤時也能陳情！委員偶爾會親自閱讀\n        </p>\n        <p>\n          <span role=\"img\" aria-label=\"缺點\">\n            👎\n          </span>{' '}\n          回覆比例低、存在感低\n        </p>\n      </li>\n      <li\n        className={value === 'tel' ? 'selected' : ''}\n        onClick={() => onChange('tel')}\n      >\n        <h4>\n          電話{' '}\n          <span role=\"img\" aria-label=\"\">\n            📞\n          </span>\n        </h4>\n        <p>\n          <span role=\"img\" aria-label=\"優點\">\n            👍\n          </span>{' '}\n          專人傾聽，多人陳情時很有感\n        </p>\n        <p>\n          <span role=\"img\" aria-label=\"缺點\">\n            👎\n          </span>{' '}\n          花時間、接電話的助理不一定會轉達\n        </p>\n      </li>\n    </ul>\n  );\n}\n\nexport default styled(SendTypeSwitch)`\n  list-style: none;\n  display: flex;\n  justify-content: center;\n  margin: 0;\n  padding: 0;\n\n  h4 {\n    margin: 0 0 0.5em;\n  }\n\n  li {\n    padding: 16px;\n    flex: 1 1 0;\n    max-width: 240px;\n\n    border: 2px solid #ff9753;\n    border-left-width: 0;\n    border-right-width: 0;\n\n    color: #ff9753;\n    cursor: pointer;\n\n    &.selected {\n      background: #ff9753;\n      color: #fff;\n    }\n  }\n\n  li:first-of-type {\n    border-left-width: 2px;\n    border-top-left-radius: 8px;\n    border-bottom-left-radius: 8px;\n  }\n\n  li:last-of-type {\n    border-right-width: 2px;\n    border-top-right-radius: 8px;\n    border-bottom-right-radius: 8px;\n  }\n\n  p {\n    font-size: 12px;\n    margin: 0;\n  }\n`;\n","import React, { useRef, useCallback, useState } from 'react';\nimport styled from '@emotion/styled';\n\nimport MessageInput from './components/MessageInput';\nimport LegislatorSections from './components/LegislatorSections';\nimport SpinningIcon from './components/SpinningIcon';\nimport Divider from './components/Divider';\n\nimport useIntersectionObserver from './lib/useIntersectionObserver';\nimport StartButton from './components/StartButton';\nimport MessageTemplates from './components/MessageTemplates';\nimport SendTypeSwitch from './components/SendTypeSwitch';\n\nconst PageContainer = styled.div`\n  padding: 40px;\n  max-width: 720px;\n  margin: 0 auto;\n`;\n\nconst Jumbotron = styled.header`\n  text-align: center;\n  padding: 30px 0;\n\n  h1 {\n    font-size: 28px;\n    font-weight: normal;\n    letter-spacing: 0.125em;\n    margin: 24px 0 16px;\n    @media screen and (min-width: 425px) {\n      font-size: 40px;\n    }\n  }\n\n  h2 {\n    margin: 0;\n    font-size: 14px;\n    letter-spacing: 0.5em;\n    font-weight: 200;\n  }\n`;\n\nconst Emphasis = styled.em`\n  color: #8f53ff;\n  font-style: normal;\n`;\n\nconst Header = React.memo(() => (\n  <Jumbotron>\n    <SpinningIcon icons={['🏠', '👨‍👨‍👧‍👦', '🏠', '👩‍👩‍👧‍👦', '🏠', '👨‍👩‍👧‍👦']} />\n    <h1>\n      我<Emphasis>愛家</Emphasis>・我聯絡\n    </h1>\n    <h2>平權立院鍵盤陳情</h2>\n  </Jumbotron>\n));\n\nconst Footer = styled.footer`\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.5);\n  text-align: center;\n  padding-bottom: 64px;\n`;\n\nfunction SettingsPage({\n  msg = '',\n  onMsgChange = () => {},\n  legislators = [],\n  selectedLegislatorIds = [],\n  doneLegislatorMap = {},\n  onSelectionChange = () => {},\n  sendType = '',\n  onSendTypeChange = () => {},\n  onSubmit = () => {},\n}) {\n  const selectionSectionRef = useRef(null);\n  const [isSelectionInView, setSelectionInView] = useState(false);\n\n  const handleNextClick = useCallback(\n    () =>\n      selectionSectionRef.current.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      }),\n    [selectionSectionRef]\n  );\n\n  const handleSelectionIntersect = useCallback(entries => {\n    if (entries[0].isIntersecting) {\n      setSelectionInView(true);\n    } else {\n      setSelectionInView(false);\n    }\n  });\n\n  const handleMessageAdd = useCallback(\n    selectedMsg => {\n      onMsgChange(`${msg}\\n\\n${selectedMsg}`);\n    },\n    [msg, onMsgChange]\n  );\n\n  useIntersectionObserver(\n    selectionSectionRef.current,\n    handleSelectionIntersect\n  );\n\n  return (\n    <PageContainer>\n      <Header />\n      <section>\n        <p>\n          讓同志能以<Emphasis>婚姻</Emphasis>成家，就是「愛家」的表現。\n          在平權法案通過之前，讓我們動動手指頭，不分異同地向立法委員們表達我們\n          <Emphasis>希望讓同志可以結婚</Emphasis>的心聲吧！\n        </p>\n        <Divider />\n        <h3>你想要怎麼陳情？</h3>\n        <SendTypeSwitch value={sendType} onChange={onSendTypeChange} />\n\n        <label>\n          <h3>你想要跟委員們說什麼呢？</h3>\n          <MessageTemplates onSelect={handleMessageAdd} />\n          <MessageInput\n            value={msg}\n            onChange={e => onMsgChange(e.target.value)}\n            rows={5}\n            autoFocus\n          />\n        </label>\n        <p\n          style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            margin: 0,\n          }}\n        >\n          <span style={{ fontSize: 12, opacity: 0.5 }}>\n            ＊ 加入你的經歷與觀察（例：有同事是同志）會更有說服力唷！\n          </span>\n          <button\n            style={{ flexShrink: 0, marginLeft: '8px' }}\n            type=\"button\"\n            onClick={handleNextClick}\n          >\n            下一步\n          </button>\n        </p>\n      </section>\n\n      <section ref={selectionSectionRef}>\n        <Divider />\n        <h3>請選擇要陳情的立委</h3>\n        <LegislatorSections\n          legislators={legislators || []}\n          selectedLegislatorIds={selectedLegislatorIds}\n          doneLegislatorMap={doneLegislatorMap}\n          onSelectionChange={onSelectionChange}\n        />\n        <StartButton\n          show={isSelectionInView}\n          selectedLegislatorIds={selectedLegislatorIds}\n          doneLegislatorMap={doneLegislatorMap}\n          onClick={onSubmit}\n          sendType={sendType}\n        />\n      </section>\n      <Footer>\n        <Divider content=\"🏳️‍🌈\" />\n\n        <p>\n          此工具為\n          <a href=\"https://www.facebook.com/groups/answerfamily/\">\n            《我愛家我解惑 - 平權社會對話工程》社群\n          </a>\n          參與者提供之\n          <a href=\"https://github.com/answerfamily/ly\">開放原始碼</a>專案。\n        </p>\n\n        <p>\n          資料來源：\n          <a\n            href=\"http://equallove.tw/articles/200\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            婚姻平權大平台委員 FB 名冊\n          </a>\n          、\n          <a\n            href=\"https://www.pridewatch.tw/beta/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            PrideWatch Taiwan 同志人權立場觀測站\n          </a>\n        </p>\n\n        <p>\n          Background icons:{' '}\n          <a\n            href=\"https://thenounproject.com/nookfulloption/collection/space2\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Space2\n          </a>{' '}\n          by Nook Fulloption from the Noun Project\n        </p>\n      </Footer>\n    </PageContainer>\n  );\n}\n\nexport default SettingsPage;\n","import { useState, useEffect } from 'react';\n\n// shared storage of legislators\nlet storedContactMapGetter = null;\n\nfunction getNameHash(name) {\n  return name.slice(0, 3).replace(/[．‧]/g, '');\n}\n\n/**\n * @returns {[object[], object]} legislator name to contact map\n */\nfunction useLegislatorContactData() {\n  const [getContactByName, setContactMapGetter] = useState(\n    storedContactMapGetter\n  );\n\n  useEffect(() => {\n    if (getContactByName) return;\n\n    import('data/ly-tel.json').then(data => {\n      const map = (data.default || []).reduce((agg, { name, contacts }) => {\n        agg[getNameHash(name)] = contacts;\n        return agg;\n      }, {});\n\n      setContactMapGetter(\n        // Cannot directly return getter function, it will be regarded as \"functional update\"\n        // Ref: https://reactjs.org/docs/hooks-reference.html#functional-updates\n        //\n        () =>\n          (storedContactMapGetter = function getContact(name = '') {\n            return map[getNameHash(name)];\n          })\n      );\n    });\n  }, [getContactByName]);\n\n  return getContactByName;\n}\n\nexport default useLegislatorContactData;\n","const fbPromise = (window.FB\n  ? Promise.resolve(window.FB)\n  : new Promise(resolve => {\n      window.fbAsyncInit = () => {\n        resolve();\n      };\n    })\n).then(() => {\n  window.FB.init({\n    appId: process.env.REACT_APP_FB_ID,\n    version: 'v3.2',\n  });\n});\n\nexport default fbPromise;\n","import React, { useLayoutEffect, useRef } from 'react';\nimport styled from '@emotion/styled';\n\nimport waitForFB from 'lib/waitForFB';\n\nconst DEFAULT_TABS = ['messages', 'timeline'];\n\nconst Cover = styled.div`\n  background: #ff9753;\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  text-align: center;\n`;\n\nfunction FacebookPagePlugin({\n  className = '',\n  tabs = DEFAULT_TABS,\n  href = '',\n  width = 320,\n  height = 500,\n  onParsed = null, // callback on layout being parsed\n  profile = '',\n}) {\n  const fbRoot = useRef(null);\n\n  useLayoutEffect(() => {\n    waitForFB.then(() => {\n      window.FB.XFBML.parse(fbRoot.current, () => {\n        if (onParsed) {\n          onParsed({ width, height });\n        }\n      });\n    });\n  }, [tabs, href, width, height]);\n\n  if (!href) {\n    return (\n      <Cover className={className} style={{ width, height }}>\n        <p>無法顯示這位委員的粉絲專頁。</p>\n\n        <p>\n          請至\n          <a href={profile} target=\"_blank\" rel=\"noopener noreferrer\">\n            委員的個人檔案\n          </a>\n          頁面留言。\n        </p>\n      </Cover>\n    );\n  }\n\n  return (\n    <div ref={fbRoot} className={className}>\n      <div\n        className=\"fb-page\"\n        data-href={href}\n        data-tabs={tabs.join(',')}\n        data-small-header=\"true\"\n        data-adapt-container-width=\"false\"\n        data-show-facepile=\"false\"\n        data-hide-cta=\"true\"\n        data-width={width}\n        data-height={height}\n      />\n    </div>\n  );\n}\n\nexport default React.memo(FacebookPagePlugin);\n","import React from 'react';\nimport styled from '@emotion/styled';\nimport Divider from 'components/Divider';\n\nconst LegislatorData = styled.article`\n  flex: 1;\n  min-height: 0;\n  overflow-y: auto;\n\n  /* hiding scrollbar */\n  padding-right: 20px;\n  margin-right: -20px;\n\n  /* gradient appear & disappear */\n  mask-image: linear-gradient(\n    to bottom,\n    transparent,\n    black 6%,\n    black 94%,\n    transparent\n  );\n`;\n\nconst Footer = styled.footer`\n  font-size: 12px;\n  opacity: 0.88;\n`;\n\nfunction LegislatorDisplay({\n  legislator: {\n    name,\n    pridewatchpage,\n    position,\n    description,\n    party,\n    area,\n    religion,\n    subarea,\n    facebookpage,\n  },\n}) {\n  return (\n    <section\n      style={{\n        /* hiding scrollbar of LegislatorData */\n        overflowX: 'hidden',\n      }}\n    >\n      <h1>{name}</h1>\n      <LegislatorData>\n        <p>{position}</p>\n        {description && (\n          <ul style={{ padding: 0 }}>\n            {description.split('\\n').map((desc, idx) => (\n              <li key={idx}>{desc}</li>\n            ))}\n          </ul>\n        )}\n        <p>\n          {party}・{area}\n          {subarea ? `／${subarea}` : null}\n        </p>\n        {religion ? <p>{religion}</p> : null}\n        <p>\n          <a href={pridewatchpage} target=\"_blank\" rel=\"noopener noreferrer\">\n            PrideWatch 頁面\n          </a>\n        </p>\n      </LegislatorData>\n      <Footer>\n        <Divider />\n        <p style={{ marginBottom: 0 }}>\n          資料來源：\n          <a\n            href=\"http://equallove.tw/articles/200\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            婚姻平權大平台委員 FB 名冊\n          </a>\n          、\n          <a\n            href=\"https://www.pridewatch.tw/beta/\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            PrideWatch Taiwan 同志人權立場觀測站\n          </a>\n        </p>\n      </Footer>\n    </section>\n  );\n}\n\nexport default LegislatorDisplay;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nfunction ContactDisplay({ contacts = [], ...props }) {\n  return (\n    <ul {...props}>\n      {contacts.map(({ name, phone, address }, idx) => (\n        <li key={idx}>\n          <h4>{name}</h4>\n          <p>\n            <a href={`tel:${phone}`}>{phone}</a>\n          </p>\n          <small>{address}</small>\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nexport default styled(ContactDisplay)`\n  flex: 1;\n  overflow-y: auto;\n  min-height: 0;\n  h4 {\n    margin: 0;\n  }\n  p {\n    margin: 0;\n  }\n  a {\n    font-weight: bold;\n  }\n  li {\n    margin-bottom: 1em;\n  }\n`;\n","import styled from '@emotion/styled';\n\nconst Button = styled.button`\n  width: 100%;\n  font-size: 28px;\n`;\n\nconst BorderedButton = styled(Button)`\n  padding: 8px 0;\n  border: 2px solid #ff5368;\n  background: transparent;\n  color: #ff5368;\n\n  &:hover {\n    color: #fff;\n  }\n`;\n\nexport { Button, BorderedButton };\n","import React from 'react';\nimport styled from '@emotion/styled';\nimport { BorderedButton } from './buttons';\n\nimport SpinningIcon from './SpinningIcon';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: column;\n  padding: 60px 20px 20px;\n  min-height: 100vh;\n`;\n\nfunction FinishDisplay({ onBack }) {\n  return (\n    <Container>\n      <SpinningIcon icons={['🏳️‍🌈', '🙇‍♀️', '🙇‍♂️']} />\n      <p>完成囉！謝謝您 m(_ _)m</p>\n      <p>\n        <BorderedButton style={{ padding: 16, fontSize: 16 }} onClick={onBack}>\n          回首頁\n        </BorderedButton>\n      </p>\n    </Container>\n  );\n}\n\nexport default FinishDisplay;\n","import React, { useRef, useEffect } from 'react';\nimport cogoToast from 'cogo-toast';\nimport ClipboardJS from 'clipboard';\n\nimport { BorderedButton } from 'components/buttons';\n\nfunction CopyButton({ onCopy, text }) {\n  const copyBtnRef = useRef(null);\n  const clipboardInstance = useRef(null);\n\n  useEffect(() => {\n    if (clipboardInstance.current) {\n      clipboardInstance.current.destroy();\n    }\n\n    // Copy button clipboard.js setup\n    clipboardInstance.current = new ClipboardJS(copyBtnRef.current, {\n      text: () => text,\n    });\n    clipboardInstance.current.on('success', () => {\n      cogoToast.success(`「${text.slice(0, 10)}⋯⋯」已複製到剪貼簿`, {\n        position: 'bottom-center',\n      });\n      onCopy();\n    });\n    return () => {\n      if (clipboardInstance.current) {\n        clipboardInstance.current.destroy();\n      }\n    };\n  }, [copyBtnRef, onCopy, text, clipboardInstance]);\n\n  return <BorderedButton ref={copyBtnRef}>複製</BorderedButton>;\n}\n\nexport default CopyButton;\n","import React, { useRef, useCallback, useState } from 'react';\nimport styled from '@emotion/styled';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport useLegislatorContactData from 'lib/useLegislatorContactData';\n\nimport MessageInput from 'components/MessageInput';\nimport FacebookPagePlugin from 'components/FacebookPagePlugin';\nimport LegislatorDisplay from 'components/LegislatorDisplay';\nimport ContactDisplay from 'components/ContactDisplay';\nimport FinishDisplay from 'components/FinishDisplay';\nimport { Button } from 'components/buttons';\nimport CopyButton from './components/CopyButton';\n\nconst Header = styled.header`\n  position: fixed;\n  background: rgba(0, 0, 0, 0.88);\n  -webkit-backdrop-filter: blur(16px);\n\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 40px;\n  display: flex;\n  align-items: center;\n\n  span {\n    margin: 0 auto;\n  }\n`;\n\nconst HeaderProgress = styled.div`\n  position: absolute;\n  z-index: -1;\n  background: #7ed321;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 0;\n\n  transition: width 0.75s ease-out;\n`;\n\nconst Back = styled.div`\n  display: flex;\n  align-items: center;\n\n  padding-left: 16px;\n  opacity: 0.5;\n  transition: opacity 0.2s;\n\n  cursor: pointer;\n  font-size: 14px;\n\n  &::before {\n    content: '';\n    width: 8px;\n    height: 8px;\n    margin-right: 8px;\n    border-top: 1px solid #fff;\n    border-left: 1px solid #fff;\n    transform: rotate(-45deg);\n  }\n\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nconst Container = styled.div`\n  padding: 60px 20px 20px;\n  min-height: 100vh;\n\n  section {\n    display: flex;\n    flex-flow: column;\n  }\n\n  @media screen and (min-width: 1024px) {\n    display: flex;\n    max-width: 1280px;\n    height: 100vh;\n    padding: 60px 40px 40px;\n    margin: 0 auto;\n\n    section {\n      flex: 3;\n      padding-left: 24px;\n      &:first-of-type {\n        flex: 2;\n        padding-left: 0;\n      }\n    }\n  }\n`;\n\nconst NextButton = styled(Button, {\n  shouldForwardProp() {\n    return true;\n  },\n})`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &::after {\n    margin-left: 16px;\n    content: '';\n    width: 16px;\n    height: 16px;\n    border-top: 2px solid #fff;\n    border-right: 2px solid #fff;\n    border-radius: 2px;\n    transform: rotate(45deg);\n    transition: transform 0.15s ease-out;\n  }\n\n  &:hover::after {\n    transform: translate(8px, 0) rotate(45deg);\n  }\n`;\n\nconst PluginWrapper = styled.div`\n  position: relative; /* for AutoSizer */\n  flex: 1 1 60vh;\n\n  border: 2px solid #ff9753;\n  border-bottom: 0;\n  border-top-right-radius: 8px;\n  border-top-left-radius: 8px;\n  overflow: hidden;\n\n  .preload-iframe {\n    position: absolute;\n    opacity: 0;\n    top: 0;\n    left: 0;\n    z-index: -1;\n  }\n\n  @media screen and (min-width: 1024px) {\n    flex-basis: auto;\n  }\n`;\n\nconst Hint = styled.div`\n  display: flex;\n  background: #ff9753;\n  padding: 4px;\n  border-top: 0;\n  border-bottom-right-radius: 8px;\n  border-bottom-left-radius: 8px;\n  font-size: 14px;\n\n  span {\n    margin: 0 1em 0 auto;\n  }\n`;\n\nfunction SendPage({\n  msg = '',\n  currentIdx = 0 /* -1 when done */,\n  selectedLegislators = [],\n  sendType = '',\n\n  onMsgChange = () => {},\n  onPrev = () => {},\n  onNext = () => {},\n  onBack = () => {},\n}) {\n  const submitStepRef = useRef(null);\n  const getContactByName = useLegislatorContactData();\n\n  // Set after plugin is parsed.\n  // This fixes the height of plugin on mobile so that window height change caused by browser footer\n  // or keyboard would not affect the component height after it's loaded.\n  //\n  // In the mean time, it does not affect desktop because desktop's height is determined\n  // by row flexbox.\n  //\n  const [pluginHeight, setPluginHeight] = useState(null);\n\n  const handleNext = useCallback(() => {\n    submitStepRef.current.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start',\n    });\n    onNext();\n  }, [submitStepRef, onNext]);\n\n  const handleCopy = useCallback(() => {\n    submitStepRef.current.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start',\n    });\n  }, [submitStepRef]);\n\n  if (currentIdx === -1) {\n    // Show finish screen\n    return <FinishDisplay onBack={onBack} />;\n  }\n\n  // Data not loaded yet\n  if (!selectedLegislators || !selectedLegislators[currentIdx]) {\n    return null;\n  }\n\n  const {\n    name,\n    facebookpage,\n    facebookprofile,\n    feedonly,\n    cannotload,\n  } = selectedLegislators[currentIdx];\n\n  return (\n    <>\n      <Header>\n        <Back onClick={onBack}>設定立委</Back>\n        <span>\n          {currentIdx + 1} / {selectedLegislators.length}\n        </span>\n        <HeaderProgress\n          style={{\n            width: `${(\n              (100 * (currentIdx + 1)) /\n              selectedLegislators.length\n            ).toFixed(2)}%`,\n          }}\n        />\n      </Header>\n      <Container>\n        <LegislatorDisplay legislator={selectedLegislators[currentIdx]} />\n        <section>\n          <h1>{sendType === 'fb' ? '1. 複製文字' : '1. 備好講稿'}</h1>\n          <MessageInput\n            style={{ flex: 1 }}\n            placeholder=\"把陳情文字貼在這裡，方便複製貼上\"\n            onChange={e => onMsgChange(e.target.value)}\n            value={msg}\n            rows={5}\n          />\n          {sendType === 'fb' && (\n            <p style={{ marginBottom: 0 }}>\n              <CopyButton onCopy={handleCopy} text={msg} />\n            </p>\n          )}\n        </section>\n        <section ref={submitStepRef}>\n          <h1>{sendType === 'fb' ? '2. 貼上並送出' : '2. 拿起話筒撥打'}</h1>\n          {sendType === 'fb' ? (\n            <>\n              <PluginWrapper\n                style={\n                  pluginHeight\n                    ? {\n                        height: pluginHeight,\n                        flexBasis: 'auto',\n                      } /* fix height of PluginWrapper */\n                    : {}\n                }\n              >\n                <AutoSizer>\n                  {({ width, height }) => [\n                    <FacebookPagePlugin\n                      key={currentIdx}\n                      href={cannotload ? null : facebookpage}\n                      profile={facebookprofile}\n                      width={width - 4 /* left/right border width */}\n                      height={height - 2 /* top border width */}\n                      onParsed={({ height }) =>\n                        setPluginHeight(height + 2 /* top border width */)\n                      }\n                    />,\n                    selectedLegislators[currentIdx + 1] && (\n                      <FacebookPagePlugin\n                        className=\"preload-iframe\"\n                        key={currentIdx + 1}\n                        href={\n                          selectedLegislators[currentIdx + 1].cannotload\n                            ? null\n                            : selectedLegislators[currentIdx + 1].facebookpage\n                        }\n                        profile={\n                          selectedLegislators[currentIdx + 1].facebookprofile\n                        }\n                        width={width - 4 /* left/right border width */}\n                        height={height - 2 /* top border width */}\n                      />\n                    ),\n                  ]}\n                </AutoSizer>\n              </PluginWrapper>\n              <Hint>\n                {feedonly ? (\n                  '＊ 委員粉專不開放私訊，請選一篇貼文回應'\n                ) : (\n                  <>\n                    ＊ 記得要按「發送」才會送出唷！<span>↑↑</span>\n                  </>\n                )}\n              </Hint>\n            </>\n          ) : (\n            getContactByName && (\n              <ContactDisplay contacts={getContactByName(name)} />\n            )\n          )}\n\n          <p style={{ marginBottom: 0 }}>\n            <NextButton\n              ga-on=\"click\"\n              ga-event-category=\"send\"\n              ga-event-action=\"submit\"\n              ga-event-label={name}\n              onClick={handleNext}\n            >\n              下一位\n            </NextButton>\n          </p>\n        </section>\n      </Container>\n    </>\n  );\n}\n\nexport default SendPage;\n","import { useState, useEffect, useMemo } from 'react';\n\n// shared storage of legislators\nlet legislatorData = null;\n\n/**\n * @returns {[object[], object]} legislators & legislatorMap (id to legislator)\n */\nfunction useLegislatorData() {\n  const [legislators, setLegislators] = useState(legislatorData);\n\n  useEffect(() => {\n    if (legislators) return;\n\n    import('data/legislators.json').then(data =>\n      setLegislators(\n        (legislatorData = /* filter out legislators that has no PrideWatch data */ data.default.rows.filter(\n          ({ area }) => !!area\n        ))\n      )\n    );\n  }, [legislators]);\n\n  return [\n    legislators,\n    useMemo(\n      () =>\n        (legislators || []).reduce((agg, legislator) => {\n          agg[legislator.id] = legislator;\n          return agg;\n        }, {}),\n      [legislators]\n    ),\n  ];\n}\n\nexport default useLegislatorData;\n","import React, { useState, useCallback, useMemo } from 'react';\nimport SettingsPage from './SettingsPage';\nimport SendPage from './SendPage';\nimport useLegislatorData from 'lib/useLegislatorData';\n\nconst POSITION_ORDER = {\n  支持同婚: 1,\n  支持專法: 2,\n  反對同婚: 3,\n  未表態: 4,\n};\n\nconst DEFAULT_SEND_TYPE = 'fb';\nconst DEFAULT_FB_MESSAGE =\n  '我是ＸＸ區的選民，請委員支持用合憲的法律，讓同志可以結婚。';\nconst DEFAULT_TEL_MESSAGE =\n  '您好，我是我是ＸＸ區的選民，我想要陳情。\\n\\n我希望委員支持用合憲的法律，讓同志可以結婚。';\n\nfunction App() {\n  const [legislators, legislatorMap] = useLegislatorData();\n  const [page, setPage] = useState('settings'); // current page. enum: 'settings', 'send'\n  const [msg, setMsg] = useState(DEFAULT_FB_MESSAGE); // message template\n  const [selectedLegislatorIds, setLegislatorIds] = useState([]); // list of selected legislator ID, with done legislators always in front.\n  const [doneLegislatorMap, setLegislatorDone] = useState({}); // {[done legislator ID]: true, ...}\n  const [sendType, setSendType] = useState(DEFAULT_SEND_TYPE); // 'fb', 'tel'\n\n  const selectedLegislators = useMemo(\n    () => selectedLegislatorIds.map(id => legislatorMap[id]),\n    [selectedLegislatorIds, legislatorMap]\n  );\n  const currentIdx = useMemo(\n    () => selectedLegislatorIds.findIndex(id => !doneLegislatorMap[id]),\n    [selectedLegislatorIds, doneLegislatorMap]\n  );\n\n  const handleSelectionChange = useCallback(\n    selectedLegislatorIds => {\n      setLegislatorIds(\n        selectedLegislatorIds.sort((aId, bId) => {\n          // First, put done legislators in front\n          if (doneLegislatorMap[aId] && !doneLegislatorMap[bId]) return -1;\n          if (!doneLegislatorMap[aId] && doneLegislatorMap[bId]) return 1;\n\n          // Then compare their positions\n          const aPos = POSITION_ORDER[legislatorMap[aId].position];\n          const bPos = POSITION_ORDER[legislatorMap[bId].position];\n          if (aPos - bPos !== 0) {\n            return aPos - bPos;\n          }\n\n          return aId - bId;\n        })\n      );\n    },\n    [setLegislatorIds, doneLegislatorMap, legislatorMap]\n  );\n\n  const handleSendTypeChange = useCallback(\n    newSendType => {\n      if (newSendType === sendType) return;\n      setSendType(newSendType);\n      window.ga('set', 'dimension2', newSendType);\n\n      if (\n        newSendType === 'fb' &&\n        (msg.trim() === '' || msg === DEFAULT_TEL_MESSAGE)\n      ) {\n        setMsg(DEFAULT_FB_MESSAGE);\n      } else if (\n        newSendType === 'tel' &&\n        (msg.trim() === '' || msg === DEFAULT_FB_MESSAGE)\n      ) {\n        setMsg(DEFAULT_TEL_MESSAGE);\n      }\n    },\n    [msg, setMsg, sendType, setSendType]\n  );\n\n  const handleSettingsSubmit = useCallback(() => setPage('send'), [setPage]);\n  const handleBackToSettings = useCallback(() => setPage('settings'), [\n    setPage,\n  ]);\n\n  const handleNext = useCallback(\n    () =>\n      setLegislatorDone({\n        ...doneLegislatorMap,\n        [selectedLegislators[currentIdx].id]: true,\n      }),\n    [doneLegislatorMap, selectedLegislators, currentIdx]\n  );\n\n  switch (page) {\n    case 'settings':\n      return (\n        <SettingsPage\n          msg={msg}\n          onMsgChange={setMsg}\n          legislators={legislators}\n          selectedLegislatorIds={selectedLegislatorIds}\n          onSelectionChange={handleSelectionChange}\n          doneLegislatorMap={doneLegislatorMap}\n          sendType={sendType}\n          onSendTypeChange={handleSendTypeChange}\n          onSubmit={handleSettingsSubmit}\n        />\n      );\n\n    case 'send': {\n      return (\n        <SendPage\n          msg={msg}\n          sendType={sendType}\n          currentIdx={currentIdx}\n          selectedLegislators={selectedLegislators}\n          onMsgChange={setMsg}\n          onNext={handleNext}\n          onBack={handleBackToSettings}\n        />\n      );\n    }\n    default:\n      throw new Error('Wrong page settings');\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'autotrack/lib/plugins/event-tracker';\nimport 'autotrack/lib/plugins/outbound-link-tracker';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'normalize.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nwindow.ga('require', 'eventTracker');\nwindow.ga('require', 'outboundLinkTracker');\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}