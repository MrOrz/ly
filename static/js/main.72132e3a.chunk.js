(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,n,t){e.exports=t(22)},20:function(e,n,t){},22:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(11),c=t.n(o),i=(t(19),t(20),t(9)),l=t(12),u=t(3),s=t(1),f=t(2),d=t(6);function m(e){var n=e.isIndeterminate,t=void 0!==n&&n,r=Object(d.a)(e,["isIndeterminate"]);return a.a.createElement("input",Object.assign({type:"checkbox",ref:function(e){e&&(e.indeterminate=t)}},r))}m.defaultProps={isIndeterminate:!1};var g=m;function p(){var e=Object(s.a)(["\n  display: grid;\n  grid-template-rows: repeat(auto-fill, 6em);\n  list-style: none;\n  padding: 0;\n\n  li {\n    grid-column-end: auto;\n  }\n"]);return p=function(){return e},e}var b=f.a.ul(p());function v(e){var n=e.legislators,t=e.selectedIdMap,o=e.onChange,c=void 0===o?function(){}:o,i=Object(r.useMemo)(function(){return n.reduce(function(e,n){n.id;var t=n.position;return e[t]=e[t]||0,e[t]+=1,e},{})},[n]),l=Object(r.useMemo)(function(){return n.reduce(function(e,n){var r=n.id,a=n.position;return e[a]=e[a]||0,t[r]&&(e[a]+=1),e},{})},[n,t]),u=Object(r.useCallback)(function(e){var r=e.target.value;0===l[r]?c(n.filter(function(e){var n=e.position,a=e.id;return n===r||t[a]}).map(function(e){return e.id})):c(n.filter(function(e){var n=e.position,a=e.id;return n!==r&&t[a]}).map(function(e){return e.id}))},[l,n,c,t]);return a.a.createElement(b,null,Object.keys(i).map(function(e){return a.a.createElement("li",{key:e},a.a.createElement("label",null,a.a.createElement(g,{value:e,onChange:u,checked:l[e]===i[e],isIndeterminate:0<l[e]&&l[e]<i[e]})," ",e))}))}function h(e){var n=e.area,t=void 0===n?"":n,o=e.legislators,c=void 0===o?[]:o,i=e.selectedIdMap,l=void 0===i?{}:i,u=e.onChange,s=void 0===u?function(){}:u,f=c.filter(function(e){var n=e.id;return l[n]}).length,d=Object(r.useCallback)(function(e){if(0===f)s(c.map(function(e){return e.id}));else{var n=c.reduce(function(e,n){return e[n.id]=!0,e},{});s(Object.keys(l).filter(function(e){return!n[e]}))}},[c,s,f]),m=Object(r.useCallback)(function(e){var n=e.target.value;l[n]?s(Object.keys(l).filter(function(e){return e!==n})):s(Object.keys(l).concat(n))},[c,l,s]);return a.a.createElement("section",null,a.a.createElement("header",null,a.a.createElement("label",null,a.a.createElement(g,{onChange:d,isIndeterminate:0<f&&f<c.length,checked:f===c.length})," ",t)),a.a.createElement(b,null,c.map(function(e){var n=e.id,t=e.name;return a.a.createElement("li",{key:n},a.a.createElement("label",null,a.a.createElement(g,{key:n,value:n,onChange:m,checked:!!l[n]})," ",t))})))}var E=function(e){var n=e.legislators,t=void 0===n?[]:n,o=e.selectedLegislatorIds,c=void 0===o?[]:o,i=(e.doneLegislatorsMap,e.onSelectionChange),l=void 0===i?function(){}:i,u=Object(r.useMemo)(function(){return t.reduce(function(e,n){return e[n.area]=e[n.area]||[],e[n.area].push(n),e},{})},[t]),s=Object(r.useMemo)(function(){return c.reduce(function(e,n){return e[n]=!0,e},{})},[c]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(v,{legislators:t,selectedIdMap:s,onChange:l}),Object.keys(u).map(function(e){return a.a.createElement(h,{key:e,area:e,selectedIdMap:s,legislators:u[e],onChange:l})}))},j=t(7);function O(){var e=Object(s.a)(["\n  /*\n    Can't use emojis that is too large on mobile:\n    https://stackoverflow.com/questions/29142118/why-do-emoji-not-render-above-a-certain-size-in-chrome\n  */\n  font-size: 60px;\n  line-height: 1;\n  display: inline-block;\n  transform: perspective(400px) rotateY(90deg);\n  animation: "," 1s cubic-bezier(0, 0.37, 1, 0.63); /* no infinite here, use DOM change to trigger animation */\n\n  @media screen and (min-width: 1024px) {\n    font-size: 84px;\n  }\n"]);return O=function(){return e},e}function w(){var e=Object(s.a)(["\n  from {\n    transform: perspective(400px) rotateY(90deg);\n  }\n\n  to {\n    transform: perspective(400px) rotateY(-90deg);\n  }\n"]);return w=function(){return e},e}var k=1;var x=Object(j.b)(w()),y=Object(f.a)(function(e){var n=e.icons,t=void 0===n?[]:n,o=Object(d.a)(e,["icons"]),c=Object(r.useState)(0),i=Object(u.a)(c,2),l=i[0],s=i[1],f=t.length;return Object(r.useEffect)(function(){var e=setTimeout(function(){s((l+1)%f)},1e3*k);return function(){return clearTimeout(e)}},[l,f]),a.a.createElement("span",Object.assign({key:l,role:"img","aria-label":"Icon"},o),t[l])})(O(),x);function C(){var e=Object(s.a)(["\n  margin: 40px 0;\n  text-align: center;\n  letter-spacing: 0.5em;\n"]);return C=function(){return e},e}var I=Object(f.a)(function(e){var n=e.content,t=void 0===n?"\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc66\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66":n,r=Object(d.a)(e,["content"]);return a.a.createElement("p",r,a.a.createElement("span",{role:"img","aria-label":"Horizontal ruler"},t))})(C());t(21);var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},t=Object(r.useRef)(null);Object(r.useLayoutEffect)(function(){t.current&&t.current.disconnect(),e&&(t.current=new IntersectionObserver(n,{}),t.current.observe(e))},[e,n])};function L(){var e=Object(s.a)(["\n  position: fixed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  padding: 24px;\n\n  transform: translate(0, 100%);\n  transition: transform 0.2s ease-out, background-color 0.2s;\n\n  font-size: 20px;\n  font-weight: bold;\n  border-radius: 0;\n\n  & > span {\n    margin: 0 auto;\n  }\n\n  &::after {\n    content: '';\n    width: 16px;\n    height: 16px;\n    border-top: 2px solid #fff;\n    border-right: 2px solid #fff;\n    border-radius: 2px;\n    transform: rotate(45deg);\n    transition: transform 0.15s ease-out;\n  }\n\n  &:hover::after {\n    transform: translate(8px, 0) rotate(45deg);\n  }\n\n  &.show {\n    transform: translate(0, 0);\n  }\n"]);return L=function(){return e},e}var S=20;var z=Object(f.a)(function(e){var n=e.doneLegislatorsMap,t=e.selectedLegislatorIds,r=e.onClick,o=e.show,c=void 0!==o&&o,i=e.className,l=Object.keys(n).length>0,u=t.filter(function(e){return!n[e]}).length,s=S*u,f=s>120?" ".concat(Math.floor(s/60)," \u5206\u9418"):" ".concat(s," \u79d2");return a.a.createElement("button",{type:"button",onClick:r,className:"".concat(i," ").concat(c&&u>0?"show":"")},a.a.createElement("span",null,l?"\u7e7c\u7e8c":"\u958b\u59cb","\u5411 ",u," \u4f4d\u59d4\u54e1\u9673\u60c5"," ",a.a.createElement("small",null," (\u7d04\u9700 ",f,") ")))})(L());function B(){var e=Object(s.a)(["\n  font-size: 12px;\n  color: rgba(255, 255, 255, 0.5);\n  text-align: center;\n  padding-bottom: 64px;\n"]);return B=function(){return e},e}function F(){var e=Object(s.a)(["\n  width: 100%;\n  border-radius: 8px;\n  padding: 8px;\n  border: 2px solid currentColor;\n  background-color: rgba(255, 255, 255, 0.12);\n  color: #ff9753;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.22);\n  }\n\n  &:focus {\n    background-color: rgba(0, 0, 0, 0.2);\n    outline: 0;\n  }\n"]);return F=function(){return e},e}function N(){var e=Object(s.a)(["\n  color: #8f53ff;\n  font-style: normal;\n"]);return N=function(){return e},e}function R(){var e=Object(s.a)(["\n  text-align: center;\n  padding: 30px 0;\n\n  h1 {\n    font-size: 28px;\n    font-weight: normal;\n    letter-spacing: 0.125em;\n    margin: 24px 0 16px;\n    @media screen and (min-width: 425px) {\n      font-size: 40px;\n    }\n  }\n\n  h2 {\n    margin: 0;\n    font-size: 14px;\n    letter-spacing: 0.5em;\n    font-weight: 200;\n  }\n"]);return R=function(){return e},e}function A(){var e=Object(s.a)(["\n  padding: 40px;\n  max-width: 720px;\n  margin: 0 auto;\n"]);return A=function(){return e},e}var P=f.a.div(A()),W=f.a.header(R()),Y=f.a.em(N()),$=f.a.textarea(F()),_=f.a.footer(B());var J=function(e){var n=e.msg,t=void 0===n?"":n,o=e.onMsgChange,c=void 0===o?function(){}:o,i=e.legislators,l=void 0===i?[]:i,s=e.selectedLegislatorIds,f=void 0===s?[]:s,d=e.doneLegislatorsMap,m=void 0===d?{}:d,g=e.onSelectionChange,p=void 0===g?function(){}:g,b=e.onSubmit,v=void 0===b?function(){}:b,h=Object(r.useRef)(null),j=Object(r.useState)(!1),O=Object(u.a)(j,2),w=O[0],k=O[1],x=Object(r.useCallback)(function(){return h.current.scrollIntoView({behavior:"smooth",block:"start"})},[h]),C=Object(r.useCallback)(function(e){e[0].isIntersecting?k(!0):k(!1)});return M(h.current,C),a.a.createElement(P,null,a.a.createElement(W,null,a.a.createElement(y,{icons:["\ud83c\udfe0","\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc66","\ud83c\udfe0","\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66","\ud83c\udfe0","\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"]}),a.a.createElement("h1",null,"\u6211",a.a.createElement(Y,null,"\u611b\u5bb6"),"\u30fb\u6211\u806f\u7d61"),a.a.createElement("h2",null,"\u5e73\u6b0a\u7acb\u9662\u9375\u76e4\u9673\u60c5")),a.a.createElement("section",null,a.a.createElement("p",null,"\u8b93\u540c\u5fd7\u80fd\u4ee5",a.a.createElement(Y,null,"\u5a5a\u59fb"),"\u6210\u5bb6\uff0c\u5c31\u662f\u300c\u611b\u5bb6\u300d\u7684\u8868\u73fe\u3002 \u5728\u5e73\u6b0a\u6cd5\u6848\u901a\u904e\u4e4b\u524d\uff0c\u8b93\u6211\u5011\u52d5\u52d5\u624b\u6307\u982d\uff0c\u4e0d\u5206\u7570\u540c\u5730\u5411\u7acb\u6cd5\u59d4\u54e1\u5011\u8868\u9054\u6211\u5011",a.a.createElement(Y,null,"\u5e0c\u671b\u8b93\u540c\u5fd7\u53ef\u4ee5\u7d50\u5a5a"),"\u7684\u5fc3\u8072\u5427\uff01"),a.a.createElement(I,null),a.a.createElement("label",null,a.a.createElement("h3",null,"\u4f60\u60f3\u8981\u8ddf\u59d4\u54e1\u5011\u8aaa\u4ec0\u9ebc\u5462\uff1f"),a.a.createElement($,{value:t,onChange:function(e){return c(e.target.value)},rows:5,autoFocus:!0})),a.a.createElement("button",{type:"button",onClick:x},"\u4e0b\u4e00\u6b65")),a.a.createElement("section",{ref:h},a.a.createElement(I,null),a.a.createElement("h3",null,"\u8acb\u9078\u64c7\u8981\u9673\u60c5\u7684\u7acb\u59d4"),a.a.createElement("p",null,a.a.createElement("button",{type:"button",onClick:function(){return p(l.map(function(e){return e.id}))}},"\u6211\u5168\u90e8\u90fd\u8981\uff01")),a.a.createElement(E,{legislators:l||[],selectedLegislatorIds:f,doneLegislatorsMap:m,onSelectionChange:p}),a.a.createElement(z,{show:w,selectedLegislatorIds:f,doneLegislatorsMap:m,onClick:v})),a.a.createElement(_,null,a.a.createElement(I,{content:"\ud83c\udff3\ufe0f\u200d\ud83c\udf08"}),a.a.createElement("p",null,"\u6b64\u5de5\u5177\u70ba",a.a.createElement("a",{href:"https://www.facebook.com/groups/answerfamily/"},"\u300a\u6211\u611b\u5bb6\u6211\u89e3\u60d1 - \u5e73\u6b0a\u793e\u6703\u5c0d\u8a71\u5de5\u7a0b\u300b\u793e\u7fa4"),"\u53c3\u8207\u8005\u63d0\u4f9b\u4e4b",a.a.createElement("a",{href:"https://github.com/answerfamily/ly"},"\u958b\u653e\u539f\u59cb\u78bc"),"\u5c08\u6848\u3002"),a.a.createElement("p",null,"Background icons:"," ",a.a.createElement("a",{href:"https://thenounproject.com/nookfulloption/collection/space2",target:"_blank",rel:"noopener noreferrer"},"Space2")," ","by Nook Fulloption from the Noun Project")))},T=(window.FB?Promise.resolve(window.FB):new Promise(function(e){window.fbAsyncInit=function(){e(window.FB)}})).then(function(e){return e.init({appId:"411731149364306",version:"v3.2"}),e});var V=a.a.memo(function(e){var n=e.tabs,t=void 0===n?["messages","timeline"]:n,o=e.href,c=void 0===o?"":o,i=Object(r.useRef)(null);return Object(r.useLayoutEffect)(function(){T.then(function(e){e.XFBML.parse(i.current)})}),a.a.createElement("div",{ref:i},a.a.createElement("div",{className:"fb-page","data-href":c,"data-tabs":t.join(","),"data-small-header":"true","data-adapt-container-width":"false","data-show-facepile":"false","data-hide-cta":"true","data-width":"320","data-height":"500"}))}),q={$$BREAK:!0};function D(e,n){for(var t=[],r=0;r<e.length;r+=1){var a=H(e[r],n);if(a===q)break;t.push(a)}return t}function H(e,n){switch(!0){case"string"===typeof e:return n(e);case e instanceof Array:return D(e,n);case a.a.isValidElement(e):var t=a.a.Children.toArray(e.props.children),r=D(t,n);return t.length===r.length&&t.every(function(e,n){return e===r[n]})?e:a.a.cloneElement(e,{},r);default:return null}}var K=RegExp(" *".concat("(\r\n|\r|\n)"," *"),"g");function X(){var e=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n"]);return X=function(){return e},e}function G(){var e=Object(s.a)(["\n  font-size: 32px;\n"]);return G=function(){return e},e}function Q(){var e=Object(s.a)(["\n  display: flex;\n  padding: 40px;\n\n  section {\n    flex: 1;\n    padding-left: 24px;\n    &:first-of-type {\n      padding-left: 0;\n    }\n  }\n"]);return Q=function(){return e},e}var U=f.a.div(Q()),Z=f.a.button(G()),ee=f.a.textarea(X());var ne=function(e){var n=e.msg,t=void 0===n?"":n,r=e.currentIdx,o=void 0===r?0:r,c=e.selectedLegislators,i=void 0===c?[]:c,l=e.onMsgChange,u=void 0===l?function(){}:l,s=e.onNext,f=void 0===s?function(){}:s;if(e.onBack,-1===o)return a.a.createElement("div",null,"\u90fd\u505a\u5b8c\u56c9\uff01\u8b1d\u8b1d\u60a8 m(_ _)m");var d=i[o],m=d.name,g=d.pridewatchpage,p=d.position,b=d.desc,v=d.facebookpage;return a.a.createElement(U,null,a.a.createElement("section",null,a.a.createElement(ee,{placeholder:"\u628a\u9673\u60c5\u6587\u5b57\u8cbc\u5728\u9019\u88e1\uff0c\u65b9\u4fbf\u8907\u88fd\u8cbc\u4e0a",onChange:function(e){return u(e.target.value)},value:t,onClick:function(e){return e.target.select()}})),a.a.createElement("section",null,a.a.createElement(V,{href:v})),a.a.createElement("section",null,a.a.createElement("h1",null,a.a.createElement("a",{href:g},m)),a.a.createElement("h2",null,p),a.a.createElement("p",null,H(b,function(e){if(!e)return e;var n,t=e.split(K).filter(function(e){return""!==e}).map(function(e,n){return e.match(K)?a.a.createElement("br",{key:"br".concat(n)}):e});return(n=t).every(function(e){return"string"===typeof e})?n.join():n})),a.a.createElement(Z,{onClick:f},"\u4e0b\u4e00\u4f4d \u300b")))},te=null;var re=function(){var e=Object(r.useState)(te),n=Object(u.a)(e,2),a=n[0],o=n[1];return Object(r.useEffect)(function(){a||t.e(3).then(t.t.bind(null,23,3)).then(function(e){return o(te=e.default.rows)})}),[a,Object(r.useMemo)(function(){return(a||[]).reduce(function(e,n){return e[n.id]=n,e},{})},[a])]},ae="\u6211\u662f\uff38\uff38\u5340\u7684\u9078\u6c11\uff0c\u8acb\u59d4\u54e1\u652f\u6301\u7528\u5408\u61b2\u7684\u6cd5\u5f8b\uff0c\u8b93\u540c\u5fd7\u53ef\u4ee5\u7d50\u5a5a\u3002",oe={"\u652f\u6301\u540c\u5a5a":1,"\u652f\u6301\u5c08\u6cd5":2,"\u53cd\u5c0d\u540c\u5a5a":3,"\u672a\u8868\u614b":4};var ce=function(){var e=re(),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)("settings"),s=Object(u.a)(c,2),f=s[0],d=s[1],m=Object(r.useState)(ae),g=Object(u.a)(m,2),p=g[0],b=g[1],v=Object(r.useState)([]),h=Object(u.a)(v,2),E=h[0],j=h[1],O=Object(r.useState)({}),w=Object(u.a)(O,2),k=w[0],x=w[1],y=Object(r.useCallback)(function(e){j(e.sort(function(e,n){return k[e]&&!k[n]?-1:!k[e]&&k[n]?1:oe[o[e].position]-oe[o[n].position]}))},[j,k,o]),C=Object(r.useCallback)(function(){return d("send")},[d]);switch(f){case"settings":return a.a.createElement(J,{msg:p,onMsgChange:b,legislators:t,selectedLegislatorIds:E,onSelectionChange:y,doneLegislatorMap:k,onSubmit:C});case"send":var I=E.map(function(e){return o[e]}),M=E.findIndex(function(e){return!k[e]});return a.a.createElement(ne,{msg:p,currentIdx:M,selectedLegislators:I,onMsgChange:b,onNext:function(){return x(Object(l.a)({},k,Object(i.a)({},I[M].id,!0)))},onBack:function(){return d("settings")}});default:throw new Error("Wrong page settings")}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.72132e3a.chunk.js.map